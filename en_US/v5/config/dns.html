<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="apple-touch-icon" size="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" size="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" size="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" color="#5bbad5" href="/safari-pinned-tab.svg"><meta name="viewport" content="width=device-width,initial-scale=1.0"><meta name="apple-mobile-web-app-title" content="Project V"><meta name="application-name" content="Project V"><meta name="msapplication-TileColor" content="#da532c"><title>DNS | V2Fly.org</title><meta name="description" content="Project V is a collection of tools that can help you build your own basic communication network">
    <link rel="modulepreload" href="/assets/app.04a846e9.js"><link rel="modulepreload" href="/assets/dns.html.8d419202.js"><link rel="modulepreload" href="/assets/dns_flowchart_20210418.c4d2d3a7.js"><link rel="modulepreload" href="/assets/dns.html.9ae57811.js"><link rel="prefetch" href="/assets/index.html.95bbb135.js"><link rel="prefetch" href="/assets/tools.html.0fb4eb42.js"><link rel="prefetch" href="/assets/api.html.6056bbf3.js"><link rel="prefetch" href="/assets/browserforwarder.html.1a96e7ff.js"><link rel="prefetch" href="/assets/dns.html.59e70a35.js"><link rel="prefetch" href="/assets/env.html.b7e70cf6.js"><link rel="prefetch" href="/assets/fakedns.html.3862a780.js"><link rel="prefetch" href="/assets/inbounds.html.b6a06163.js"><link rel="prefetch" href="/assets/multiple_config.html.55ef5ed8.js"><link rel="prefetch" href="/assets/observatory.html.7cafaac5.js"><link rel="prefetch" href="/assets/outbounds.html.e6d3a5b0.js"><link rel="prefetch" href="/assets/overview.html.89fa5f81.js"><link rel="prefetch" href="/assets/policy.html.9ed30abe.js"><link rel="prefetch" href="/assets/reverse.html.7c3ef35c.js"><link rel="prefetch" href="/assets/routing.html.c71dd0b9.js"><link rel="prefetch" href="/assets/stats.html.7ddff95f.js"><link rel="prefetch" href="/assets/transport.html.aa5f760b.js"><link rel="prefetch" href="/assets/index.html.9abefafc.js"><link rel="prefetch" href="/assets/command.html.3586007f.js"><link rel="prefetch" href="/assets/faq.html.59a8a037.js"><link rel="prefetch" href="/assets/help.html.1a629939.js"><link rel="prefetch" href="/assets/install.html.1eb9a5a9.js"><link rel="prefetch" href="/assets/start.html.261a5fe5.js"><link rel="prefetch" href="/assets/workflow.html.e5e8f4b3.js"><link rel="prefetch" href="/assets/blackhole.html.59d479aa.js"><link rel="prefetch" href="/assets/dns.html.7a843964.js"><link rel="prefetch" href="/assets/dokodemo.html.81df66b3.js"><link rel="prefetch" href="/assets/freedom.html.882b320e.js"><link rel="prefetch" href="/assets/http.html.72e9bed8.js"><link rel="prefetch" href="/assets/loopback.html.1cba2549.js"><link rel="prefetch" href="/assets/shadowsocks.html.d144658b.js"><link rel="prefetch" href="/assets/socks.html.2ac587ae.js"><link rel="prefetch" href="/assets/trojan.html.59d9dfd6.js"><link rel="prefetch" href="/assets/vless.html.909a9131.js"><link rel="prefetch" href="/assets/vmess.html.9f4eae95.js"><link rel="prefetch" href="/assets/domainsocket.html.7c05bdc9.js"><link rel="prefetch" href="/assets/grpc.html.071b1521.js"><link rel="prefetch" href="/assets/h2.html.3071271c.js"><link rel="prefetch" href="/assets/mkcp.html.5028eb04.js"><link rel="prefetch" href="/assets/quic.html.1b3c647f.js"><link rel="prefetch" href="/assets/tcp.html.d42d8b55.js"><link rel="prefetch" href="/assets/websocket.html.c201d2ba.js"><link rel="prefetch" href="/assets/compile.html.479113fc.js"><link rel="prefetch" href="/assets/design.html.b84ae773.js"><link rel="prefetch" href="/assets/guide.html.72f2e66d.js"><link rel="prefetch" href="/assets/mkcp.html.377f3f02.js"><link rel="prefetch" href="/assets/muxcool.html.023ae905.js"><link rel="prefetch" href="/assets/vmess.html.94a3c096.js"><link rel="prefetch" href="/assets/tools.html.c3090e53.js"><link rel="prefetch" href="/assets/api.html.3830e788.js"><link rel="prefetch" href="/assets/dns.html.e0d24602.js"><link rel="prefetch" href="/assets/fakedns.html.18ffe163.js"><link rel="prefetch" href="/assets/outbounds.html.3a870bb0.js"><link rel="prefetch" href="/assets/overview.html.b05f7acb.js"><link rel="prefetch" href="/assets/transport.html.5e902a64.js"><link rel="prefetch" href="/assets/faq.html.ee9b9f52.js"><link rel="prefetch" href="/assets/install.html.654f2a7c.js"><link rel="prefetch" href="/assets/start.html.b24b27f4.js"><link rel="prefetch" href="/assets/workflow.html.97642bcf.js"><link rel="prefetch" href="/assets/dns.html.dcb6cd57.js"><link rel="prefetch" href="/assets/geo.html.21ce3109.js"><link rel="prefetch" href="/assets/inbound.html.d090a21c.js"><link rel="prefetch" href="/assets/outbound.html.b6702aa6.js"><link rel="prefetch" href="/assets/overview.html.a4992b9d.js"><link rel="prefetch" href="/assets/proxy.html.2e092447.js"><link rel="prefetch" href="/assets/router.html.380a6902.js"><link rel="prefetch" href="/assets/service.html.79de1c19.js"><link rel="prefetch" href="/assets/stream.html.fa06238d.js"><link rel="prefetch" href="/assets/blackhole.html.9953469f.js"><link rel="prefetch" href="/assets/dns.html.0340b057.js"><link rel="prefetch" href="/assets/dokodemo.html.29230b78.js"><link rel="prefetch" href="/assets/freedom.html.a8c5961b.js"><link rel="prefetch" href="/assets/http.html.b62fc745.js"><link rel="prefetch" href="/assets/compile.html.401c2e28.js"><link rel="prefetch" href="/assets/design.html.ba2595e7.js"><link rel="prefetch" href="/assets/guide.html.a33a8a5b.js"><link rel="prefetch" href="/assets/mkcp.html.dcd43793.js"><link rel="prefetch" href="/assets/vmess.html.c7608945.js"><link rel="prefetch" href="/assets/geo.html.b7d62d3b.js"><link rel="prefetch" href="/assets/inbound.html.2a3dcfde.js"><link rel="prefetch" href="/assets/outbound.html.857da111.js"><link rel="prefetch" href="/assets/overview.html.90d45ea2.js"><link rel="prefetch" href="/assets/proxy.html.88343bf9.js"><link rel="prefetch" href="/assets/router.html.2f7a207c.js"><link rel="prefetch" href="/assets/service.html.3e07567e.js"><link rel="prefetch" href="/assets/stream.html.445d237d.js"><link rel="prefetch" href="/assets/blackhole.html.ffcc3b3a.js"><link rel="prefetch" href="/assets/dns.html.9004fe9f.js"><link rel="prefetch" href="/assets/dokodemo.html.87386334.js"><link rel="prefetch" href="/assets/freedom.html.0c734317.js"><link rel="prefetch" href="/assets/http.html.22784859.js"><link rel="prefetch" href="/assets/loopback.html.d75bc410.js"><link rel="prefetch" href="/assets/shadowsocks.html.05acf332.js"><link rel="prefetch" href="/assets/socks.html.d6fc1dfb.js"><link rel="prefetch" href="/assets/trojan.html.bda586b0.js"><link rel="prefetch" href="/assets/vless.html.f0464b45.js"><link rel="prefetch" href="/assets/vlite.html.2481c7cd.js"><link rel="prefetch" href="/assets/vmess.html.27fc14fa.js"><link rel="prefetch" href="/assets/backgroundObservatory.html.613768fd.js"><link rel="prefetch" href="/assets/browser.html.d9c9db4a.js"><link rel="prefetch" href="/assets/burstObservatory.html.718ae2c8.js"><link rel="prefetch" href="/assets/policy.html.f4dbefe0.js"><link rel="prefetch" href="/assets/stats.html.e262e053.js"><link rel="prefetch" href="/assets/grpc.html.256c24b3.js"><link rel="prefetch" href="/assets/kcp.html.a3bc1ce7.js"><link rel="prefetch" href="/assets/quic.html.bd7787c2.js"><link rel="prefetch" href="/assets/tcp.html.5f7e7ba6.js"><link rel="prefetch" href="/assets/websocket.html.246efee3.js"><link rel="prefetch" href="/assets/blackhole.html.724a2cad.js"><link rel="prefetch" href="/assets/dns.html.a882b1a1.js"><link rel="prefetch" href="/assets/dokodemo.html.8a58328a.js"><link rel="prefetch" href="/assets/freedom.html.f8566ed2.js"><link rel="prefetch" href="/assets/http.html.7477d3d1.js"><link rel="prefetch" href="/assets/loopback.html.ff337a4f.js"><link rel="prefetch" href="/assets/shadowsocks.html.66d40aa1.js"><link rel="prefetch" href="/assets/socks.html.fec3c4d9.js"><link rel="prefetch" href="/assets/trojan.html.bf9fe0e3.js"><link rel="prefetch" href="/assets/vless.html.c7b5fb5a.js"><link rel="prefetch" href="/assets/vlite.html.1cfb83d6.js"><link rel="prefetch" href="/assets/vmess.html.3279b3bc.js"><link rel="prefetch" href="/assets/backgroundObservatory.html.050b62fb.js"><link rel="prefetch" href="/assets/browser.html.22e54f34.js"><link rel="prefetch" href="/assets/burstObservatory.html.217bab9f.js"><link rel="prefetch" href="/assets/policy.html.04da7ead.js"><link rel="prefetch" href="/assets/stats.html.2f39b4a2.js"><link rel="prefetch" href="/assets/kcp.html.4fe83651.js"><link rel="prefetch" href="/assets/quic.html.096d7801.js"><link rel="prefetch" href="/assets/tcp.html.25ae95ad.js"><link rel="prefetch" href="/assets/websocket.html.edf87fb4.js"><link rel="prefetch" href="/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/assets/index.html.69005f14.js"><link rel="prefetch" href="/assets/tools.html.2a0235cb.js"><link rel="prefetch" href="/assets/api.html.6400542b.js"><link rel="prefetch" href="/assets/browserforwarder.html.d9901af6.js"><link rel="prefetch" href="/assets/dns.html.0392323c.js"><link rel="prefetch" href="/assets/env.html.8b17c68c.js"><link rel="prefetch" href="/assets/fakedns.html.50a9b0cb.js"><link rel="prefetch" href="/assets/inbounds.html.3c96cd9d.js"><link rel="prefetch" href="/assets/multiple_config.html.a6528797.js"><link rel="prefetch" href="/assets/observatory.html.784dc483.js"><link rel="prefetch" href="/assets/outbounds.html.830e8c04.js"><link rel="prefetch" href="/assets/overview.html.e01aab08.js"><link rel="prefetch" href="/assets/policy.html.565486d3.js"><link rel="prefetch" href="/assets/reverse.html.591ca742.js"><link rel="prefetch" href="/assets/routing.html.ea72fda1.js"><link rel="prefetch" href="/assets/stats.html.07ed0523.js"><link rel="prefetch" href="/assets/transport.html.ddfc4879.js"><link rel="prefetch" href="/assets/index.html.9a24ae78.js"><link rel="prefetch" href="/assets/command.html.0c36fb58.js"><link rel="prefetch" href="/assets/faq.html.5dd114a7.js"><link rel="prefetch" href="/assets/help.html.0ed2fca7.js"><link rel="prefetch" href="/assets/install.html.fccad9d5.js"><link rel="prefetch" href="/assets/start.html.d24abcfb.js"><link rel="prefetch" href="/assets/workflow.html.959429e8.js"><link rel="prefetch" href="/assets/blackhole.html.b13d6d28.js"><link rel="prefetch" href="/assets/dns.html.9552e4c1.js"><link rel="prefetch" href="/assets/dokodemo.html.d04f303d.js"><link rel="prefetch" href="/assets/freedom.html.5ff25e03.js"><link rel="prefetch" href="/assets/http.html.a4297049.js"><link rel="prefetch" href="/assets/loopback.html.f4a7fd16.js"><link rel="prefetch" href="/assets/shadowsocks.html.698009c7.js"><link rel="prefetch" href="/assets/socks.html.c09bff6b.js"><link rel="prefetch" href="/assets/trojan.html.3c1b450a.js"><link rel="prefetch" href="/assets/vless.html.c263154e.js"><link rel="prefetch" href="/assets/vmess.html.5838d22b.js"><link rel="prefetch" href="/assets/domainsocket.html.630a9f23.js"><link rel="prefetch" href="/assets/grpc.html.16957851.js"><link rel="prefetch" href="/assets/h2.html.d66781ea.js"><link rel="prefetch" href="/assets/mkcp.html.f81df564.js"><link rel="prefetch" href="/assets/quic.html.e9a38367.js"><link rel="prefetch" href="/assets/tcp.html.5c6f3d1f.js"><link rel="prefetch" href="/assets/websocket.html.d8ac4f89.js"><link rel="prefetch" href="/assets/compile.html.3b5ed1d8.js"><link rel="prefetch" href="/assets/design.html.d86f044c.js"><link rel="prefetch" href="/assets/guide.html.fe8fa1e6.js"><link rel="prefetch" href="/assets/mkcp.html.31fbb6fb.js"><link rel="prefetch" href="/assets/muxcool.html.3b45fd1d.js"><link rel="prefetch" href="/assets/vmess.html.b355ee7f.js"><link rel="prefetch" href="/assets/tools.html.552a51b3.js"><link rel="prefetch" href="/assets/api.html.22f192c5.js"><link rel="prefetch" href="/assets/dns.html.eb3736f1.js"><link rel="prefetch" href="/assets/fakedns.html.47ae9f12.js"><link rel="prefetch" href="/assets/outbounds.html.47a5dbb0.js"><link rel="prefetch" href="/assets/overview.html.b3565935.js"><link rel="prefetch" href="/assets/transport.html.d55bcc85.js"><link rel="prefetch" href="/assets/faq.html.1b6dfd5b.js"><link rel="prefetch" href="/assets/install.html.482d6350.js"><link rel="prefetch" href="/assets/start.html.0a2b4a00.js"><link rel="prefetch" href="/assets/workflow.html.73601dd6.js"><link rel="prefetch" href="/assets/dns.html.12fdb27f.js"><link rel="prefetch" href="/assets/geo.html.2df5e717.js"><link rel="prefetch" href="/assets/inbound.html.f6d79a16.js"><link rel="prefetch" href="/assets/outbound.html.db34cfef.js"><link rel="prefetch" href="/assets/overview.html.3325bcbb.js"><link rel="prefetch" href="/assets/proxy.html.f2c83d3b.js"><link rel="prefetch" href="/assets/router.html.84d1aa67.js"><link rel="prefetch" href="/assets/service.html.a33a5fe9.js"><link rel="prefetch" href="/assets/stream.html.91b92a68.js"><link rel="prefetch" href="/assets/blackhole.html.e1e9c916.js"><link rel="prefetch" href="/assets/dns.html.c2df8a95.js"><link rel="prefetch" href="/assets/dokodemo.html.5aa02288.js"><link rel="prefetch" href="/assets/freedom.html.fad86d4a.js"><link rel="prefetch" href="/assets/http.html.ea046862.js"><link rel="prefetch" href="/assets/compile.html.c29aa987.js"><link rel="prefetch" href="/assets/design.html.7c780939.js"><link rel="prefetch" href="/assets/guide.html.4e4e3fa0.js"><link rel="prefetch" href="/assets/mkcp.html.0fd1407b.js"><link rel="prefetch" href="/assets/vmess.html.fb5917a5.js"><link rel="prefetch" href="/assets/geo.html.6a5050d8.js"><link rel="prefetch" href="/assets/inbound.html.3960bf57.js"><link rel="prefetch" href="/assets/outbound.html.efe0b851.js"><link rel="prefetch" href="/assets/overview.html.26c7d0e7.js"><link rel="prefetch" href="/assets/proxy.html.6af451b9.js"><link rel="prefetch" href="/assets/router.html.27817582.js"><link rel="prefetch" href="/assets/service.html.ba9db149.js"><link rel="prefetch" href="/assets/stream.html.4d4dad89.js"><link rel="prefetch" href="/assets/blackhole.html.3cb03428.js"><link rel="prefetch" href="/assets/dns.html.359ea291.js"><link rel="prefetch" href="/assets/dokodemo.html.1fc1eb97.js"><link rel="prefetch" href="/assets/freedom.html.195fd25d.js"><link rel="prefetch" href="/assets/http.html.52b203af.js"><link rel="prefetch" href="/assets/loopback.html.7ceac6df.js"><link rel="prefetch" href="/assets/shadowsocks.html.83d51b5d.js"><link rel="prefetch" href="/assets/socks.html.23077c81.js"><link rel="prefetch" href="/assets/trojan.html.2efe061d.js"><link rel="prefetch" href="/assets/vless.html.e480fc19.js"><link rel="prefetch" href="/assets/vlite.html.4a7cb5eb.js"><link rel="prefetch" href="/assets/vmess.html.a75e6041.js"><link rel="prefetch" href="/assets/backgroundObservatory.html.eef890da.js"><link rel="prefetch" href="/assets/browser.html.eb505974.js"><link rel="prefetch" href="/assets/burstObservatory.html.be1a579c.js"><link rel="prefetch" href="/assets/policy.html.a47fb552.js"><link rel="prefetch" href="/assets/stats.html.a5fbf54c.js"><link rel="prefetch" href="/assets/grpc.html.56053b2c.js"><link rel="prefetch" href="/assets/kcp.html.c994bb44.js"><link rel="prefetch" href="/assets/quic.html.814c4ac5.js"><link rel="prefetch" href="/assets/tcp.html.c02e463d.js"><link rel="prefetch" href="/assets/websocket.html.62d3d55f.js"><link rel="prefetch" href="/assets/blackhole.html.fc54b8a7.js"><link rel="prefetch" href="/assets/dns.html.7f44e48a.js"><link rel="prefetch" href="/assets/dokodemo.html.df7b6b2f.js"><link rel="prefetch" href="/assets/freedom.html.8fe34726.js"><link rel="prefetch" href="/assets/http.html.0577deea.js"><link rel="prefetch" href="/assets/loopback.html.ee1dac6e.js"><link rel="prefetch" href="/assets/shadowsocks.html.1eeb5682.js"><link rel="prefetch" href="/assets/socks.html.dc2b7e33.js"><link rel="prefetch" href="/assets/trojan.html.b526455f.js"><link rel="prefetch" href="/assets/vless.html.841d7807.js"><link rel="prefetch" href="/assets/vlite.html.cc895d49.js"><link rel="prefetch" href="/assets/vmess.html.523f3331.js"><link rel="prefetch" href="/assets/backgroundObservatory.html.a3ad7957.js"><link rel="prefetch" href="/assets/browser.html.0bcc8731.js"><link rel="prefetch" href="/assets/burstObservatory.html.38e68861.js"><link rel="prefetch" href="/assets/policy.html.b0dfde68.js"><link rel="prefetch" href="/assets/stats.html.acc78d54.js"><link rel="prefetch" href="/assets/kcp.html.fac82ebf.js"><link rel="prefetch" href="/assets/quic.html.c497eb55.js"><link rel="prefetch" href="/assets/tcp.html.f7611f2f.js"><link rel="prefetch" href="/assets/websocket.html.d1122b38.js"><link rel="prefetch" href="/assets/404.html.3d3a5efe.js"><link rel="prefetch" href="/assets/Tool.a1a79fef.js"><link rel="prefetch" href="/assets/Uuid.aac49daa.js">
    <link rel="stylesheet" href="/assets/style.ad5697ba.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/en_US/" class=""><img class="logo" src="/v2ray.png" alt="V2Fly.org"><span class="site-name can-hide">V2Fly.org</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/en_US/guide/start" class="" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/v5/config/overview" class="" aria-label="Config Reference"><!--[--><!--]--> Config Reference <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/awesome/tools" class="" aria-label="Tools"><!--[--><!--]--> Tools <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/developer/intro/compile" class="" aria-label="Developer Guide"><!--[--><!--]--> Developer Guide <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://guide.v2fly.org/" rel="noopener noreferrer" target="_blank" aria-label="New concise guide"><!--[--><!--]--> New concise guide <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/v5/config/dns.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/en_US/v5/config/dns.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/v2fly" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/en_US/guide/start" class="" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/v5/config/overview" class="" aria-label="Config Reference"><!--[--><!--]--> Config Reference <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/awesome/tools" class="" aria-label="Tools"><!--[--><!--]--> Tools <!--[--><!--]--></a></div><div class="navbar-item"><a href="/en_US/developer/intro/compile" class="" aria-label="Developer Guide"><!--[--><!--]--> Developer Guide <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://guide.v2fly.org/" rel="noopener noreferrer" target="_blank" aria-label="New concise guide"><!--[--><!--]--> New concise guide <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/v5/config/dns.html" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/en_US/v5/config/dns.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/v2fly" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">Config Reference <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/en_US/v5/config/overview.html" class="sidebar-item" aria-label="Configuration File Format (Draft)"><!--[--><!--]--> Configuration File Format (Draft) <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/inbound.html" class="sidebar-item" aria-label="Inbounds"><!--[--><!--]--> Inbounds <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/outbound.html" class="sidebar-item" aria-label="Outbounds"><!--[--><!--]--> Outbounds <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/proxy.html" class="sidebar-item" aria-label="Proxy Protocol"><!--[--><!--]--> Proxy Protocol <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/stream.html" class="sidebar-item" aria-label="Stream"><!--[--><!--]--> Stream <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/service.html" class="sidebar-item" aria-label="Service"><!--[--><!--]--> Service <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en_US/v5/config/dns.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="DNS"><!--[--><!--]--> DNS <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/en_US/v5/config/dns.html#dns-processing-flow" class="router-link-active router-link-exact-active sidebar-item" aria-label="DNS processing flow"><!--[--><!--]--> DNS processing flow <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en_US/v5/config/dns.html#nameserverobject" class="router-link-active router-link-exact-active sidebar-item" aria-label="NameServerObject"><!--[--><!--]--> NameServerObject <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/en_US/v5/config/dns.html#statichostsobject" class="router-link-active router-link-exact-active sidebar-item" aria-label="StaticHostsObject"><!--[--><!--]--> StaticHostsObject <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/en_US/v5/config/router.html" class="sidebar-item" aria-label="Router"><!--[--><!--]--> Router <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/geo.html" class="sidebar-item" aria-label="Geo"><!--[--><!--]--> Geo <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Proxy Protocol <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/en_US/v5/config/proxy/socks.html" class="sidebar-item" aria-label="Socks"><!--[--><!--]--> Socks <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/proxy/vmess.html" class="sidebar-item" aria-label="VMess"><!--[--><!--]--> VMess <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/proxy/vlite.html" class="sidebar-item" aria-label="VLite"><!--[--><!--]--> VLite <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/proxy/shadowsocks.html" class="sidebar-item" aria-label="Shadowsocks"><!--[--><!--]--> Shadowsocks <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/proxy/http.html" class="sidebar-item" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/proxy/dokodemo.html" class="sidebar-item" aria-label="Dokodemo"><!--[--><!--]--> Dokodemo <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/proxy/freedom.html" class="sidebar-item" aria-label="Freedom"><!--[--><!--]--> Freedom <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/proxy/loopback.html" class="sidebar-item" aria-label="Loopback"><!--[--><!--]--> Loopback <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/proxy/blackhole.html" class="sidebar-item" aria-label="Blackhole"><!--[--><!--]--> Blackhole <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/proxy/dns.html" class="sidebar-item" aria-label="DNS"><!--[--><!--]--> DNS <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/proxy/trojan.html" class="sidebar-item" aria-label="Trojan"><!--[--><!--]--> Trojan <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/proxy/vless.html" class="sidebar-item" aria-label="VLESS"><!--[--><!--]--> VLESS <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Stream Transport Protocol <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/en_US/v5/config/stream/tcp.html" class="sidebar-item" aria-label="TCP"><!--[--><!--]--> TCP <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/stream/websocket.html" class="sidebar-item" aria-label="WebSocket"><!--[--><!--]--> WebSocket <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/stream/kcp.html" class="sidebar-item" aria-label="KCP(mKCP)"><!--[--><!--]--> KCP(mKCP) <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/stream/quic.html" class="sidebar-item" aria-label="QUIC"><!--[--><!--]--> QUIC <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Service <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/en_US/v5/config/service/stats.html" class="sidebar-item" aria-label="Stats"><!--[--><!--]--> Stats <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/service/policy.html" class="sidebar-item" aria-label="Policy"><!--[--><!--]--> Policy <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/service/browser.html" class="sidebar-item" aria-label="Browser Forwarder"><!--[--><!--]--> Browser Forwarder <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/service/burstObservatory.html" class="sidebar-item" aria-label="Burst Observatory"><!--[--><!--]--> Burst Observatory <!--[--><!--]--></a><!----></li><li><a href="/en_US/v5/config/service/backgroundObservatory.html" class="sidebar-item" aria-label="Background Observatory"><!--[--><!--]--> Background Observatory <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="dns" tabindex="-1"><a class="header-anchor" href="#dns" aria-hidden="true">#</a> DNS</h1><p>service.dns</p><p>V2Ray has a built-in DNS server, which has two main purposes: matching routing rules according to the IP resolved from a domain, and traditional DNS function—resolving the target address to connect.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Due to the complexity of DNS protocol, V2Ray only supports basic IP query function (A and AAAA records). In order to have a complete DNS experience, you may want to use an dedicated DNS serverware, such as <a href="https://coredns.io" target="_blank" rel="noopener noreferrer">CoreDNS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, together with V2Ray&#39;s builtin DNS features.</p></div><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>For <code>outbound</code>s with <code>freedom</code> protocol, the default value of <code>domainStrategy</code> is <code>AsIs</code>, therefore the DNS settings will not be applied to this outbound by default. If necessary, it should be configured as<code>UseIP</code>.</p></div><h2 id="dns-processing-flow" tabindex="-1"><a class="header-anchor" href="#dns-processing-flow" aria-hidden="true">#</a> DNS processing flow</h2><p>When a domain name list assigned by a DNS server matches the domain name currently being queried, V2Ray will use this DNS server first, otherwise, it will query from top to bottom, and only return the IP list which matches expectIPs. The processing flow diagram of the DNS server is as follows:</p><p><img src="/dns_flowchart_20210418.svg" alt=""></p><blockquote><p><code>nameServer</code>: [ <a href="#NameServerObject">NameServerObject</a> ]</p></blockquote><p>A list of name servers.</p><blockquote><p><code>staticHosts</code>: [ <a href="#StaticHostsObject">StaticHostsObject</a> ]</p></blockquote><p>Host Mapping rules. This can be used to manually define DNS resolution results or transform DNS resolutions.</p><blockquote><p><code>tag</code>: string</p></blockquote><p>The inbound tag for traffic initiated by the dns module.</p><blockquote><p><code>disableCache</code>: true|false</p></blockquote><p>Disable built in caching for DNS. Otherwise the DNS result will be cached for 10 mins.</p><blockquote><p><code>queryStrategy</code>: <code>USE_IP</code> | <code>USE_IP4</code> | <code>USE_IP6</code></p></blockquote><p>The type of network address requested by dns.</p><blockquote><p><code>disableFallback</code>: true|false</p></blockquote><p>Disable the fallback query step.</p><blockquote><p><code>disableFallbackIfMatch</code>: bool</p></blockquote><p>Disable the fallback query step if there is a server with prioritizedDomain matches.</p><h2 id="nameserverobject" tabindex="-1"><a class="header-anchor" href="#nameserverobject" aria-hidden="true">#</a> NameServerObject</h2><blockquote><p><code>address</code>: string</p></blockquote><p>The network address or URL of Domain Name Service Service Server.</p><p>Following Types are supported:</p><ul><li>Standard DNS: An address like <code>1.0.0.1:53</code> specifies an UDP DNS Server. This the most common type of DNS Server.</li><li>DNS over TCP: An address like <code>tcp://host:port</code> specifies an TCP DNS Server. Currently DNS over TCP in V2Ray have performance implications.</li><li>DNS over Local TCP: An address like <code>tcp+local://host:port</code> specifies a TCP DNS Server send over local network. The communication with remote DNS server will be send from client&#39;s network environment directly without dispatch over routing component.</li><li>DNS over HTTPS: An address like <code>https://host:port/dns-query</code> specifies an DNS over HTTPS Server.</li><li>DNS over Local HTTPS: An address like <code>https+local://host:port/dns-query</code> specifies an DNS over HTTPS Server over local network. The communication with remote DNS server will be send from client&#39;s network environment directly without dispatch over routing component.</li><li>DNS over Local QUIC: An address like <code>quic+local://host:port/</code> specifies an DNS over QUIC Server over local network. The communication with remote DNS server will be send from client&#39;s network environment directly without dispatch over routing component.</li></ul><blockquote><p><code>clientIp</code>: string</p></blockquote><p>The client IP address indication send to the DNS Server. The server may return a localised result based on this address.</p><blockquote><p><code>skipFallback</code>: true | false</p></blockquote><p>Prevent fallback to this DNS Server.</p><blockquote><p><code>prioritizedDomain</code>: [ <a href="#PrioritizedDomainObject">PrioritizedDomainObject</a> ]</p></blockquote><p>The domains that should be send to this server. If the domain being queried match one of the specification, then the query will be send to this server first.</p><blockquote><p><code>geoip</code>: [ <a href="/en_US/v5/config/geo.html#GeoIPObject" class="">GeoIPObject</a> ]</p></blockquote><p>The IP address expected from this server. If the result is not from the given IP address range, it will be discarded.</p><h2 id="statichostsobject" tabindex="-1"><a class="header-anchor" href="#statichostsobject" aria-hidden="true">#</a> StaticHostsObject</h2><blockquote><p><code>type</code>: <code>Full</code> | <code>Subdomain</code> | <code>Keyword</code> | <code>Regex</code></p></blockquote><p>Static Hosts supports different types of matching method.</p><ul><li>Full: Requires an exact match. When this domain name completely matches the target domain name, the rule takes effect. For example, &quot;v2ray.com&quot; matches &quot;v2ray.com&quot; but not &quot;www.v2ray.com&quot;.</li><li>Subdomain: Matches a domain and all its subdomain. This rule takes effect when the domain name is the target domain name or its subdomain name. For example, &quot;v2ray.com&quot; matches &quot;www.v2ray.com&quot;, &quot;v2ray.com&quot;, but not &quot;xv2ray.com&quot;.</li><li>Keyword: Matches any domain with a keyword. When this string matches any part of the target domain name, the rule takes effect. For example, &quot;sina.com&quot; can match &quot;sina.com&quot;, &quot;sina.com.cn&quot; and &quot;www.sina.com&quot; but not &quot;sina.cn&quot;.</li><li>Regex: Matches domain based on Regular Expression. When this regular expression matches the target domain name, the rule takes effect. For example, &quot;\\.goo.*\\.com$&quot; matches &quot;www.google.com&quot; and &quot;fonts.googleapis.com&quot; but not &quot;google.com&quot;.</li></ul><blockquote><p><code>domain</code>: string</p></blockquote><p>The domain matching specification. Its interpretation is based on the <code>type</code> of the rule.</p><blockquote><p><code>ip</code>: string</p></blockquote><p>The static host IP address. If configured, this IP address will be used as the domain name resolution result for matching domains.</p><blockquote><p><code>proxiedDomain</code>: string</p></blockquote><p>The replacement domain. If configured, this domain name&#39;s resolution result will be used as the domain name resolution result for mathcing domains.</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/v2fly/v2fly-github-io/edit/main/docs/en_US/v5/config/dns.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub"><!--[--><!--]--> Edit this page on GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: xiaokangwang@outlook.com">Shelikhoo</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 44045911+kidonng@users.noreply.github.com">Kid</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/en_US/v5/config/service.html" class="" aria-label="Service"><!--[--><!--]--> Service <!--[--><!--]--></a></span><span class="next"><a href="/en_US/v5/config/router.html" class="" aria-label="Router"><!--[--><!--]--> Router <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.04a846e9.js" defer></script>
  </body>
</html>
